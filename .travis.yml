dist: trusty
language: python
python:
- 3.6
env:
  global:
  - secure: WcO+NeqUK1Adt+xklLNoYYAE3uLO0Z83uXUYl7xSzm96qFLIyIWwFBhEq10HoFj0+NpYA2mqGF7yXZzAUs4WQmvvYwfMF6EwkkVYMqUL3s28Wzpz4XAucacaMCq62j+zRs6ck3vIOGMuELwekl9i8bfyXI6bVC3tsqj1p/puKt4PqshfrpMchpZF/NrahMh17sGfAoIN3CnsZTtQObodZfSWYvmpdlacYZTOkpU40qUHK2n5YDIboBWyYwT8YZ0hXiwO7YiSBhqSdNv4z3rmZishpoDOT6frI7MzhWAge2Ww0TNlnwlzID9HGE4uASi0yHNvG9JMlbEe1V7EbXQ6y4HeBHOhgmbNXZMJInhY7ldg5STaP9jD6o8YUupLLzNMEcigazSy15UfNVol3EetzI4dJJh4KVcqCfmux5QCRXDS3NuDVLLVvDuC25lCgK+VjwDNRLL4XJRy53Mahu2g+sQbj+sHOyAhUHrO55eAGl0XfoUsf0ffzeaAj26B8D/LFm94rPe7ZrepRALKfHVZwz9OHWqbJTqnIDlC/lLkq2HsfEEn0YYIgRAaxcZon5jOU4Vq7iJwFb5BffACTARhgMu8bkyW22o/Jzp9+KVFwiVfRh5s47Np8yPnMD2CvF41kTXFPtUQI/XiW23dGyXlvYY1BFVSWhcTXY8sfghfmeM=
git:
  submodules: false
before_install:
- sed -i 's/git@github.com:/https:\/\/github.com\//' .gitmodules
- git submodule update --init --recursive
- |
  echo -e "travis_fold:start:$1\033[33;1m$2\033[0m"
  wget https://github.com/gohugoio/hugo/releases/download/v0.55.6/hugo_0.55.6_Linux-64bit.deb -O /tmp/hugo.deb &> /dev/null
  sudo dpkg -i /tmp/hugo.deb &> /dev/null
  hugo version
  echo -e "\ntravis_fold:end:$1\r"
script:
- hugo
deploy:
  provider: pages
  local_dir: public
  skip_cleanup: true
  github_token: "$GITHUB_TOKEN"
  verbose: true
  keep_history: true
  repo: Sam-Martin/sammartin.github.io
  target_branch: master
  on:
    branch: master
