dist: trusty
language: python
python:
- 3.6
git:
  submodules: false
before_install:
- sed -i 's/git@github.com:/https:\/\/github.com\//' .gitmodules
- git submodule update --init --recursive
- |
  echo -e "travis_fold:start:$1\033[33;1m$2\033[0m"
  wget https://github.com/gohugoio/hugo/releases/download/v0.55.6/hugo_0.55.6_Linux-64bit.deb -O /tmp/hugo.deb &> /dev/null
  sudo dpkg -i /tmp/hugo.deb &> /dev/null
  hugo version
  echo -e "\ntravis_fold:end:$1\r"
script:
- hugo
after_script:
- echo "sammart.in" > public/CNAME
deploy:
  provider: pages
  local_dir: public
  skip_cleanup: true
  github_token: "$GITHUB_TOKEN"
  verbose: true
  keep_history: true
  repo: Sam-Martin/sammartin.github.io
  target_branch: master
  on:
    branch: master
